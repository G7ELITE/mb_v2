---
# Cat√°logo de Automa√ß√µes - ManyBlack V2
# Define automa√ß√µes dispon√≠veis com regras de elegibilidade em PT-BR

- id: ask_deposit_for_test
  topic: "teste"
  use_when: "o lead quer testar"
  eligibility: "n√£o concordou em depositar e n√£o depositou"
  priority: 0.85
  cooldown: 24h
  output:
    type: message
    text: "Para liberar o teste, voc√™ consegue fazer um pequeno dep√≥sito? üí∞"
    buttons:
      - id: btn_yes_deposit
        label: "Sim, consigo"
        kind: callback
        set_facts: 
          agreements.can_deposit: true
        track:
          event: "click_yes_deposit"
          utm_passthrough: true
      - id: btn_help_deposit
        label: "Como deposito?"
        kind: url
        url: "$deposit_help_link"
        track:
          event: "open_deposit_help"

- id: signup_link
  topic: "conta"
  use_when: "precisa criar conta"
  eligibility: "n√£o tem conta em alguma corretora suportada"
  priority: 0.90
  cooldown: 12h
  output:
    type: message
    text: |
      Primeiro voc√™ precisa criar uma conta na corretora! üìä
      
      Recomendo a Quotex - √© mais f√°cil para iniciantes:
    buttons:
      - id: btn_quotex_signup
        label: "Criar conta Quotex"
        kind: url
        url: "https://quotex.io/pt/?lid=123456"
        track:
          event: "signup_quotex_click"
          utm_source: "manyblack_bot"
          utm_medium: "telegram"
          utm_campaign: "signup_quotex"
      - id: btn_nyrion_signup  
        label: "Criar conta Nyrion"
        kind: url
        url: "https://nyrion.com/signup?ref=mb"
        track:
          event: "signup_nyrion_click"

- id: prompt_deposit
  topic: "deposito"
  use_when: "precisa depositar"
  eligibility: "concordou em depositar mas ainda n√£o depositou"
  priority: 0.80
  cooldown: 6h
  output:
    type: message
    text: |
      Agora √© s√≥ fazer o dep√≥sito m√≠nimo na sua conta! üíµ
      
      Pode ser qualquer valor a partir de $10. Assim que confirmar, libero seu acesso.
    buttons:
      - id: btn_deposit_done
        label: "J√° depositei"
        kind: callback
        set_facts:
          deposit.status: "pending"
        track:
          event: "deposit_claimed"
      - id: btn_deposit_help
        label: "Preciso de ajuda"
        kind: callback
        track:
          event: "deposit_help_requested"

- id: trial_unlock
  topic: "liberacao"
  use_when: "liberar acesso ao teste"
  eligibility: "todas as etapas anteriores cumpridas"
  priority: 1.0
  cooldown: 0h
  output:
    type: message
    text: |
      üéâ Parab√©ns! Seu acesso foi liberado!
      
      Agora voc√™ pode usar o rob√¥ de sinais. Lembrando:
      ‚Ä¢ Opera em M5
      ‚Ä¢ Usa estrat√©gia Gale
      ‚Ä¢ Acompanhe sempre o mercado
      
      Boa sorte e bons trades! üìà
    buttons:
      - id: btn_start_trading
        label: "Come√ßar a operar"
        kind: callback
        track:
          event: "trial_started"
          utm_campaign: "trial_conversion"

- id: explain_robot
  topic: "como funciona"
  use_when: "quer entender o rob√¥"
  eligibility: "n√£o foi explicado"
  priority: 0.70
  cooldown: 2h
  output:
    type: message
    text: |
      O rob√¥ ManyBlack funciona assim:
      
      ü§ñ **Sinais Autom√°ticos**: Analisa o mercado e envia sinais
      ‚è∞ **Timeframe M5**: Opera em gr√°ficos de 5 minutos  
      üéØ **Estrat√©gia Gale**: Usa progress√£o para recuperar perdas
      üìä **Precis√£o**: Taxa de acerto em torno de 75-80%
      
      Quer testar?
    buttons:
      - id: btn_want_test
        label: "Quero testar"
        kind: callback
        set_facts:
          agreements.wants_test: true
        track:
          event: "wants_test_clicked"

- id: ask_broker_preference
  topic: "corretora"
  use_when: "precisa escolher corretora"
  eligibility: "n√£o tem conta"
  priority: 0.75
  cooldown: 24h
  output:
    type: message
    text: "Qual corretora voc√™ prefere? Ou quer uma recomenda√ß√£o?"
    buttons:
      - id: btn_recommend_broker
        label: "Me recomende"
        kind: callback
        track:
          event: "broker_recommendation_requested"
      - id: btn_have_quotex
        label: "Tenho Quotex"
        kind: callback
        set_facts:
          accounts.quotex: "reported"
        track:
          event: "has_quotex_reported"
      - id: btn_have_nyrion
        label: "Tenho Nyrion"
        kind: callback
        set_facts:
          accounts.nyrion: "reported"
        track:
          event: "has_nyrion_reported"

- id: deposit_help_detailed
  topic: "ajuda deposito"
  use_when: "precisa ajuda para depositar"
  eligibility: "solicitou ajuda com dep√≥sito"
  priority: 0.85
  cooldown: 1h
  output:
    type: message
    text: |
      **Como fazer dep√≥sito:**
      
      1Ô∏è‚É£ Entre na sua conta da corretora
      2Ô∏è‚É£ Procure por "Dep√≥sito" ou "Adicionar fundos"
      3Ô∏è‚É£ Escolha o m√©todo (PIX √© mais r√°pido)
      4Ô∏è‚É£ Valor m√≠nimo: $10
      5Ô∏è‚É£ Confirme o pagamento
      
      Demora alguns minutos para processar ‚è±Ô∏è
    buttons:
      - id: btn_deposit_pix
        label: "Como depositar via PIX"
        kind: url
        url: "$deposit_pix_guide"
      - id: btn_deposit_done_help
        label: "J√° fiz o dep√≥sito"
        kind: callback
        set_facts:
          deposit.status: "pending"

